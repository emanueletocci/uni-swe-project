@startuml
package rubrica {

    package controllers{
       class GenericController{
            + GenericController():
            - listaContatti: ObservableList<ContattoEsteso>
            - rubrica: Rubrica
            + mostraDialog(AlertType, String, String): void
            + controllaCampiObbligatori(String, String) : boolean
            + controllaTelelfono(String) : boolean
            + controllaEmail(String) : boolean

    }

        class RubricaController{
            + RubricaController()
            - contattoSelezionato: ContattoEsteso
            - contattiFiltratiPreferiti: FilteredList<ContattoEsteso>
            - filteredContatti: FilteredList<ContattoEsteso>
            - contattiFiltratiEmergenza: FilteredList<ContattoEsteso>
            + initialize(URL, ResourceBundle): void
            - filtraContatti(String): void
            - mostraDettaglioContatti(ContattoEsteso): void
            - setEditableAll(boolean): void
            - openWebpage(String): void
             
        }
       
        class CreaContattoController {
            + CreaContattoController()
            + initialize (URL, ResourceBundle) : void
        }

    }

        class App {
           - root: Parent
           - scene: Scene
           + start(Stage): void
           + main(String[]): void
        }

    package models{

    class Rubrica{
          + Rubrica():
          - rubrica: Map<Integer, ContattoEsteso>
          + ricercaContatto(ContattoEsteso): ContattoEsteso
          + rimuoviContatto(ContattoEsteso): ContattoEsteso
          + aggiornaContatto(ContattoEsteso): Boolean
          + toString(): String
          + aggiungiContatto(ContattoEsteso): ContattoEsteso
          + aggiungiContattoEVerifica(ContattoEsteso): Boolean
        }
       
  
   class Contatto{
          + Contatto():
          + Contatto(String, String, String, String, String, Boolean, Boolean):
          - cognome: String
          - preferito: Boolean
          - telefono3: String
          - nome: String
          - telefono2: String
          - telefono1: String
          - emergenza: Boolean
          - id: Integer
          + toString(): String
          + isEmergenza(): BooleanProperty
          + hashCode(): int
          + equals(Object): boolean
          + isPreferito(): BooleanProperty
          + generaId() : Integer       
        }

   class ContattoEsteso {
         + ContattoEsteso():
         + ContattoEsteso(String, String, String, String, String, String, String, 
                     String, LocalDate, String, String, String, Boolean, Boolean, Image)
         - email3: String
         - email2: String
         - email1: String
         - indirizzoResidenza: String
         - sitoWeb: String
         - compleanno: LocalDate
         - note: String
         - img : Image
         + toString(): String
         + hashCode(): int
         - generaId(): Integer
         + equals(Object): boolean
  
        }


    }

  package gestoreIO {

    class Export {
        + Export():
        - path: String
        + getVcard(ContattoEsteso): String
        + esportaRubrica(Rubrica): void
        + esportaContatto(ContattoEsteso): void
    }
 
   class Import {
      + Import():
      - path: String
      + importVcard(Rubrica, String): void
}
}
}

Rubrica    "1" o-- "0..*"   Contatto
Contatto     <|--           ContattoEsteso
GenericController  <|--   RubricaController
GenericController  <|--   CreaContattoController
Rubrica -- GenericController
Import -- RubricaController
Export -- RubricaController
App --> RubricaController
